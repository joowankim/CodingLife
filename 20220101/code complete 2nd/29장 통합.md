# 통합

> "통합"이라는 용어는 개별적인 소프트웨어 컴포넌트를 하나의 시스템으로 결합하는 소프트웨어 개발 행위를 말한다.

이번 장에서는 통합과 구현 순서에 관해 '통합'이라는 관점에서 설명한다.

## 통합 접근 방법의 중요성

> 소프트웨어를 잘못된 순서로 구현하고 통합하면 코드를 작성하거나 테스트하거나 디버깅하기가 더 어렵다.

## 통합 빈도-단계별 또는 점증적 접근 방법

### 단계별 통합

코드 컴플리트 2/e 책의 표혆으로는 몇 년 전까지만 해도 단계별 통합이 일반적이었다고 한다. 단계별 통합은 다음과 같은 단계를 따른다.

1. 각 클래스를 설계하고 작성하고 테스트하고 디버깅한다. - 단위 개발
2. 클래스를 하나의 큰 시스템으로 결합한다.  - 시스템 통합
3. 전체 시스템을 테스트하고 디버깅한다. - 시스템 분해

> 단계별 통합은 모든 클래스에 대해 개발자 테스트를 수행하고 난 후인 프로젝트 후반부까지는 시작할 수 없다.
> 클래스가 마침내 통합되고 수많은 오류가 드러나면 개발자들은 방법론에 따라 오류를 검출하고 수정하기보다는 곧바로 허둥대며 디버깅을 시작한다.

### 점증적 통합

점증적 통합의 단계

1. 시스템에서 크기가 작고 기능적인 부분을 개발한다.
   - 가장 작은 기능을 수행하는 부분
   - 가장 어려운 부분
   - 핵심적인 부분
   - 등등
2. 클래스를 설계하고 토드를 작성하고 테스트하고 디버깅한다.
3. 새로운 클래스를 뼈대에 통합한다.
   - 뼈대와 새로운 클래스를 결합한 것을 테스트하고 디버깅한다.
   - 새로운 클래스를 추가하기 전에 결합한 부분이 잘 작동하는지 확인한다.
   - 작업이 남았다면 2단계부터 다시 반복한다.

> 점증적 통합에서 새로운 문제점이 발생할 때, 새로운 클래스가 분명히 오류와 관련이 있다.
> 어디를 살펴봐야 하는지 정확하게 알 수 있다.

## 점증적 통합 전략

> 컴포넌트를 구현하는 순서가 통합되는 순서와 맞아야 한다.

### 하향시 통합

> 하향식 통합에서는 계층 구조의 상위에 클래스를 먼저 작성하고 통합한다.

- 클래스 사이의 인터페이스를 신중하게 명시해야 한다.
- 시스템의 제어 논리 구조를 비교적 일찍 테스트할 수 있다.
  - 설계상 문제점이 빨리 노출된다.

- 순수한 하향식 통합에서는 까다로운 시스템 인터페이스를 마지막까지 사용해 볼 수 없다.
- 순수한 하향식 통합은 하향식으로 통합하기 위해 엄청나게 많은 스텁 코드가 필요하다.

### 상향식 통합

> 상향식 통합에서는 계층 구조의 맨 아래부터 클래스를 작성하고 통합한다.

- 저수준 클래스를 한꺼번에 추가하지 않고 한 번에 하나씩 추가한다.

- 상향식 통합은 마지막에서 가서야 고수준 시스템 인터페이스를 통합할 수 있다는 것이다.
- 상향식 통합을 시작하기 전에 전체 시스템 설계를 마쳐야 한다.

### 샌드위치 통합

> 우선 상위 수준에서 고수준 비즈니스 객체 클래스를 통합한다. 
> 그리고 장치-인터페이스 클래스와 하위 수준에서 널리 사용되는 유틸리티 클래스를 통합한다.

### 위험 지향적인 통합

- 어려운 부분 우선 통합
- 각 클래스와 연관된 위험 수준을 규명하고 구현하기 가장 어려운 부분부터 구현한다.
- 물론, 구현하면서 생각과 다른 부분이 발생한다.

### 기능 지향적인 통합

> 한 번에 하나의 기능을 통합하는 것이다.

장점

1. 저수준 라이브러리 클래스를 제외하고는 실질적으로 어떠한 기능에도 비계가 필요 없다.
   - Q. 비계가 stub이나 mock 아닌가? 왜 필요없는 지 잘 이해가 안된다.
2. 새로 통합되는 기능을 점증적으로 추가한다
3. 기능 지향적인 통합이 객체지향 설계에서 잘 작동한다는 점이다.

## 일일 빌드와 스모크 테스트

> 빈번한 통합이 가져오는 부수적인 효과 중 하나는 통합을 함으로써 프로젝트 마지막에 가서야 갑자기 나타날 때까지 숨겨진 채 쌓일 수 있는 작업을 겉으로 드러나게 한다는 점이다.

- 스모크 테스트는 전체 시스템을 처음부터 끝까지 실행해야 한다.

> 스모크 테스트가 최신으로 유지되지 않는다면 일일 빌드는 테스트 케이스 일부가 제품의 품질에 대한 잘못된 자신감을 느끼게 하여 자기기만에 빠질 수 있는 작업이 될 수 있다.
